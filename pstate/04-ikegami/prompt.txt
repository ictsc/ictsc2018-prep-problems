「Tunnel」

この問題はステップが2つに分かれています。
これらのステップを別々にメールで送信しても構いません。
その場合、メールの本文に「どちらのステップについての回答・質問か」を明記していただきますようよろしくお願いいたします。

まずは以下のURLからトポロジーをダウンロードできるので、こちらをご覧ください。
https://drive.google.com/open?id=1uVoNZJoAUj8DPcAnjBTeo40v1R2QOoxT

この問題の世界では172.20.0.0/16はインターネットで使われるアドレスで、ISPから割り当てられるものとします。
また、この問題では192.168.0.0/16のレンジがプライベートIPアドレスです。
みなさんはとある企業にいます。

この企業には、東京本部と大阪支部があり、
大阪支部はISPから172.20.1.1が、
東京本部でISPから172.20.2.1が割り当てられています。

大阪支部ではプライベートアドレスをGatewayであるルーター`osaka`でNAPTし、
東京支部でも同様にプライベートアドレスをルーター`tokyo`でNAPTして使用しています。



#### アクセス情報
VNCサーバーに接続し、そこからPC`fumidai`にSSHしてください。
    Address: 192.168.0.10
    User: admin
    Password: password

まず疎通確認として、CloudflareのPublicDNS`1.1.1.1`にtracerouteしてみましょう。以下のようになっていればOKです。

```
[admin@fumidai:~]%traceroute 1.1.1.1

traceroute to 1.1.1.1 (1.1.1.1), 30 hops max, 60 byte packets
 1  gateway (192.168.10.254)  1.220 ms  1.138 ms  1.110 ms
 2  172.20.1.254 (172.20.1.254)  1.299 ms  1.290 ms  1.298 ms
  ...
```

次に皆さんが操作するネットワーク機器にアクセスしてもらいましょう。
このPC`fumidai`はルータosaka配下に設置されたPCで、もう一つのIPアドレス`192.168.10.1`が割り当てられています。



### STEP1. GREトンネル開通

現時点では、大阪支部と東京本部では別々にNATしているため、大阪支部から東京にあるサーバーにアクセスすることはできません。
これを解決するためには、各Gatewayで拠点間VPNを張る必要があります。(トポロジー図の紫色で示された部分)
ルータ`tokyo`の設定は完了しているため、あなたはルータ`osaka`の設定を行ってください。

Osakaルータの接続情報
   Address: 192.168.10.254 (fumidaiサーバーからSSH接続することができます）
   User: gre
   Password: tunnel
   Enable password: tunnel

 要件一覧
   プロトコル: GRE
   アドレス: 192.168.100.1/24
   Tunnel送信元アドレス: 172.20.1.1
   Tunnel宛先アドレス: 172.20.2.1
   MTU: 1400byte


### STEP2. デフォルトルートをトンネルに切り替えましょう
GRE Tunnelの設定ができましたら、大阪支部から外部へのパケットがすべて東京本部を経由するようにルーター`osaka`に設定してください。

ルーター・サーバーへのアクセス情報
  踏み台VNCサーバから以下のサーバにアクセスすることができます。
  1. fumidai (画面を見るためのVNCサーバーではない踏み台サーバー）
    Address: 192.168.0.10
    User: admin
    Password: password

  以下のルーターは踏み台VNCサーバーから直接アクセスすることができません。
  2. osaka (大阪側ルーター）
    Address: 192.168.10.254 (1. fumidaiサーバーからSSH接続することができます）
    User: gre
    Password: tunnel
    Enable password: tunnel


ゴール (STEP1)
  拠点間VPNの一つである`GRE Tunnel`をルーターosaka側に設定する

ゴール（STEP2）
  大阪支部から外部へのパケットがすべて東京本部を経由するようにルーター`osaka`に設定する



完了した際には、文章問題(relate)のサービスで完了報告をお願いします。
内容は基本自由ですが、記録(どのようなコマンドで作業を行ったか等)を必ず記入してください。
また、この問題では以下の情報の報告もお願いします。
* STEP1で入力したコンフィグ
* PC`fumidai`から東京本部のサーバ192.168.20.1へのtracerouteの結果のコピペ
* STEP2で入力したコンフィグ
* 1.1.1.1へtracerouteした結果のコピペ
* `show running-config`のコピペ



質問がある場合は配布資料でお伝えしている通り
yosen@icttoracon.net宛に質問のメールを送信してください。

復旧措置
ペナルティーによる減点はありません。
質問としてメールしてください。
